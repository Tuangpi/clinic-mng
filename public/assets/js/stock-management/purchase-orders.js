var orderAttachmentList=function(){let t=$("#orderAttachmentsTable"),e=null;return{init:function(){!function(){null!=e&&e.clear().destroy();e=t.DataTable({processing:!0,serverSide:!0,ajax:`${_url}/${_id}/files`,columns:[{data:null,name:"actions",searchable:!1,orderable:!1},{data:"original_name",name:"original_name"},{data:"size",name:"size",render:function(t){return cms.humanFileSize(t,!1)}},{data:"created_at",name:"created_at",render:function(t){return cms.formatDate(t)}},{data:"created_by",name:"created_by"}],order:[[1,"asc"]],createdRow:function(t,e,n){$(t).find("td:eq(0)").addClass("text-center").html(`<div class="btn-group dropend">\n                        <a href="#" class="dropdown-toggle text-primary" data-bs-toggle="dropdown">\n                        <i class="fa fa-ellipsis-vertical"></i>\n                        </a>\n                        <ul class="dropdown-menu dropdown-menu-end">\n                            <li><a href="${_url}/${_id}/files/download/${e.name}" class="dropdown-item fs-11px" type="button">Download</a></li>\n                            <li><button id="del${e.id}" class="dropdown-item delete fs-11px" type="button">Delete</button></li>\n                        </ul>\n                    </div>`)},drawCallback:function(){t.find(".delete").unbind("click").click((function(){cms.confirm("Delete File","Are you sure you want to delete this file?",(()=>{cms.delete(`${_url}/${_id}/files/${this.id.replace("del","")}`,null,(()=>{toastr.success("File has been deleted.","Delete File"),n()}))}))}))},initComplete:function(){$("#orderAttachmentsTable_filter input").unbind(),$("#orderAttachmentsTable_filter input").keyup((function(t){13==t.keyCode&&e.search(this.value).draw()}))}})}()},reload:n};function n(){e.ajax.reload(null,!1)}}(),orderAttachments=function(){let t,e=$("#attachFile"),n=$("#orderAttachmentsModal");return{init:function(){t=Dropzone.forElement("#orderAttachmentsForm"),t.options.uploadMultiple=!0,t.options.parallelUploads=100,t.options.autoProcessQueue=!0,t.options.addRemoveLinks=!1,e.click((function(){i()}))},viewForm:i,removeAllFiles:a,getFiles:function(){return t.files}};function a(){t.removeAllFiles()}function i(){t.options.url=`${_url}/${_id}/files/upload`,t.on("successmultiple",(function(t,e){orderAttachmentList.reload(),a()})),orderAttachmentList.init(),n.modal("show")}}(),orderPayment=function(){let t=$("#orderDetailsModal"),e=t.find("#paymentForm"),n=e.find("#addPayment"),a=e.find("#paymentsTable").find("tbody"),i=t.find("#savePayment"),o=0;return{init:function(){n.click((function(){r({id:"0",payment_date:null,invoice_no:"",paid_amt:"",payment_option_id:"",reference_no:"",remarks:""},!1)})),i.click((function(){!function(){if(e.parsley().validate()){let t={payments:a.children().map((function(t,e){const n=$(e);return{id:this.id.replace("trPay",""),paymentDate:cms.convertToDate(n.find(".payment-date").val()),invoiceNo:n.find(".invoice-no").val(),amt:cms.convertToDecimal(n.find(".amt").val()),paymentOption:n.find(".payment-option").val(),refNo:n.find(".ref-no").val(),remarks:n.find(".remarks").val()}})).get()};cms.saveForm(0,t,`${_url}/${_id}/update-payment`,(function(){orderList.reload(),orderDetails.view()}))}}()})),t.on("hidden.bs.modal",(function(){a.html("")}))},addPayment:r,clear:function(){a.html("")}};function r(t,e){o++;const n=null!=t.payment_date?cms.formatDate(t.payment_date):"",i=cms.isNull(t.ref_no,""),r=cms.isNull(t.remarks,""),d=$(`\n        <tr id="trPay${t.id}">\n        <td>\n        ${e?'<div class="btn-group dropend">\n                <a href="#" class="dropdown-toggle text-primary" data-bs-toggle="dropdown">\n                <i class="fa fa-ellipsis-vertical"></i>\n                </a>\n                <ul class="dropdown-menu dropdown-menu-end">\n                    <li><button class="dropdown-item edit fs-11px" type="button">Edit</button></li>\n                    <li><button class="dropdown-item delete fs-11px" type="button">Delete</button></li>\n                </ul>\n            </div>':'<button type="button" class="btn btn-primary btn-xs fs-9px delete"><i class="fa fa-trash"></i></button>'}\n        </td>\n        <td>\n            <div class="input-group input-group-sm date">\n                <input type="text"\n                    class="form-control form-control-sm datepicker payment-date"\n                    placeholder="DD/MM/YYYY" required data-parsley-errors-container="#paymentDate${o}-error" data-init-val="${n}" value="${n}"/>\n                <span class="input-group-text input-group-addon bg-primary"><i\n                        class="fa fa-calendar"></i></span>\n            </div>\n            <div id="paymentDate${o}-error"></div>\n        </td>\n        <td><input type="text" class="invoice-no form-control form-control-sm" required placeholder="Invoice No." data-init-val="${t.invoice_no}" value="${t.invoice_no}"/></td>\n        <td><input id="amt${o}" type="text" class="amt form-control form-control-sm" required placeholder="Paid Amt." data-init-val="${t.paid_amt}" value="${t.paid_amt}"/></td>\n        <td>\n            <select class="form-select form-select-sm payment-option" required data-init-val=${t.payment_option_id}>\n                <option value="" disabled="true" ${""==t.payment_option_id?"selected":""}>Select payment</option>\n                ${_paymentOptions.map((function(e){return`<option value="${e.id}" ${t.payment_option_id==e.id?"selected":""}>${e.description}</option>`})).join("")}\n            </select>\n        </td>\n        <td><input type="text" class="ref-no form-control form-control-sm" placeholder="Ref. No." data-init-val="${i}" value="${i}"/></td>\n        <td><input type="text" class="remarks form-control form-control-sm" placeholder="Remarks" data-init-val="${r}" value="${r}"/></td>\n        </tr>\n        `).appendTo(a),l=d.find(".form-select, .form-control");l.prop("disabled",e),d.find(".delete").click((function(){$(this).closest("tr").remove()})),d.find(".edit").click((function(){const t=$(this),e="Edit"==t.text();e?t.html("Cancel"):(d.find(".payment-date").datepicker("setDate",d.find(".payment-date").data("init-val")),d.find(".invoice-no").val(d.find(".invoice-no").data("init-val")),d.find(".amt").val(d.find(".amt").data("init-val")),d.find(".payment-option").val(d.find(".payment-option").data("init-val")),d.find(".ref-no").val(d.find(".ref-no").data("init-val")),d.find(".remarks").val(d.find(".remarks").data("init-val")),t.html("Edit")),l.prop("disabled",!e)})),d.find(".datepicker").datepicker({todayHighlight:!0}),new AutoNumeric(`#amt${o}`,{minimumValue:1,decimalPlaces:2,watchExternalChanges:!0})}}(),orderDelivery=function(){let t=$("#orderDeliveryModal"),e=$("#orderDeliveryModalTitle"),n=t.find("#deliveryForm"),a=n.find("#addDelivery"),i=n.find("#deliveriesTable").find("tbody"),o=t.find("#saveDelivery"),r=0;return{init:function(){a.click((function(){d({id:"0",delivery_date:cms.currentDate(!1),dr_no:"",delivered_qty:"",pack_size:"",batch_no:"",expiry_date:null,remarks:""})})),o.click((function(){!function(){if(n.parsley().validate()){let e={deliveries:i.children().map((function(t,e){const n=$(e);return{id:this.id.replace("trDel",""),deliveryDate:cms.convertToDate(n.find(".delivery-date").val()),drNo:n.find(".dr-no").val(),qty:cms.convertToDecimal(n.find(".qty").val()),ps:cms.convertToInt(n.find(".ps").val()),bn:n.find(".bn").val(),expiryDate:cms.convertToDate(n.find(".expiry-date").val()),remarks:n.find(".remarks").val()}})).get()};cms.saveForm(_popId,e,`${_url}/${_id}/products`,(function(){orderList.reload(),orderDetails.view(),t.modal("hide")}))}}()})),t.on("hidden.bs.modal",(function(){i.html("")}))},view:function(n){cms.get(`${_url}/${_id}/products/${_popId}`,null,(function(a){e.text(n);for(let t=0;t<a.product.deliveries.length;t++)d(a.product.deliveries[t]);t.modal("show")}))}};function d(t){r++;const e=$(`\n        <tr id="trDel${t.id}">\n        <td><button type="button" class="btn btn-primary btn-xs fs-9px delete"><i class="fa fa-trash"></i></button></td>\n        <td>\n            <div class="input-group input-group-sm date">\n                <input type="text"\n                    class="form-control form-control-sm datepicker delivery-date"\n                    placeholder="DD/MM/YYYY" required data-parsley-errors-container="#deliveryDate${r}-error" value="${null!=t.delivery_date?cms.formatDate(t.delivery_date):""}"/>\n                <span class="input-group-text input-group-addon bg-primary"><i\n                        class="fa fa-calendar"></i></span>\n            </div>\n            <div id="deliveryDate${r}-error"></div>\n        </td>\n        <td><input type="text" class="dr-no form-control form-control-sm" required placeholder="DR No." value="${t.dr_no}"/></td>\n        <td><input id="qty${r}" type="text" class="qty form-control form-control-sm" required placeholder="Delivered Qty." value="${t.delivered_qty}"/></td>\n        <td><input id="ps${r}" type="text" class="ps form-control form-control-sm" placeholder="Pack Size" value="${cms.isNull(t.pack_size,"")}"/></td>\n        <td><input type="text" class="bn form-control form-control-sm" placeholder="Batch No." value="${cms.isNull(t.batch_no,"")}"/></td>\n        <td>\n            <div class="input-group input-group-sm date">\n                <input type="text"\n                    class="form-control form-control-sm datepicker expiry-date"\n                    placeholder="DD/MM/YYYY" value="${null!=t.expiry_date?cms.formatDate(t.expiry_date):""}"/>\n                <span class="input-group-text input-group-addon bg-primary"><i\n                        class="fa fa-calendar"></i></span>\n            </div>\n        </td>\n        <td><input type="text" class="remarks form-control form-control-sm" placeholder="Remarks" value="${cms.isNull(t.remarks,"")}"/></td>\n        </tr>\n        `).appendTo(i);e.find(".delete").click((function(){$(this).closest("tr").remove()})),e.find(".datepicker").datepicker({todayHighlight:!0}),new AutoNumeric(`#qty${r}`,{minimumValue:0,watchExternalChanges:!0}),new AutoNumeric(`#ps${r}`,{minimumValue:0,decimalPlaces:0,watchExternalChanges:!0})}}(),orderDetails=function(){let t=$("#orderDetailsModal"),e=$("#orderDetailsModalTitle"),n=t.find("#orderDate"),a=t.find("#poNo"),i=t.find("#supplier"),o=t.find("#discountDisplay"),r=t.find("#tax"),d=t.find("#totalAmount"),l=t.find("#totalPaidAmount"),c=t.find("#remainingBalance"),s=t.find("#paymentStatus"),m=t.find("#itemsTable").find("tbody"),u=t.find("#createdBy"),p=t.find("#createdDate"),f=t.find("#modifiedBy"),y=t.find("#modifiedDate");return{view:function(){cms.get(`${_url}/${_id}`,null,(function(v){_currencySymbol=v.currencySymbol,function(t){e.text(t.code),n.text(cms.formatDate(t.order_date)),a.text(t.po_no),i.text(t.supplier.name),o.text(`${_currencySymbol}${cms.numberWithCommas(t.disc_amount)}${null!=t.disc_percentage?` (${t.disc_percentage}%)`:""}`),null!=t.tax_amount&&r.text(`${_currencySymbol}${cms.numberWithCommas(t.tax_amount)}${null!=t.tax_percentage?` (${t.tax_percentage}%)`:""}`);d.text(_currencySymbol+cms.numberWithCommas(t.total_amount)),l.text(_currencySymbol+cms.numberWithCommas(t.paid_amount)),c.text(_currencySymbol+cms.numberWithCommas(t.remaining_balance));let v="No Payment",_="danger";0==t.remaining_balance?(v="Fully Paid",_="success"):t.paid_amount>0&&(v="Partial Payment",_="warning");s.removeClass("text-warning").removeClass("text-danger").removeClass("text-success").addClass(`text-${_}`).text(v);let h=[];for(let e=0;e<t.products.length;e++){const n=t.products[e];h.push(`<tr id="pop${n.id}">\n                <td class='item'>${n.product.name}</td>\n                <td>${n.uom}</td>\n                <td>${_currencySymbol}${cms.numberWithCommas(n.unit_price)}</td>\n                <td>${cms.numberWithCommas(n.qty)}</td>\n                <td>${_currencySymbol}${cms.numberWithCommas(n.total_amount)}</td>\n                <td><a href="javascript:;" class="delivered">${cms.numberWithCommas(n.delivered_qty)}</a></td>\n                <td>${cms.numberWithCommas(n.pending_qty)}</td>\n            </tr>`)}m.html(h.join("")),u.text(`${t.creator.first_name} ${t.creator.last_name}`),p.text(cms.formatDateTime(t.created_at)),f.text(`${t.updator.first_name} ${t.updator.last_name}`),y.text(cms.formatDateTime(t.updated_at)),m.find(".delivered").click((function(){const e=$(this).closest("tr");_popId=e.attr("id").replace("pop",""),orderDelivery.view(`${t.code} - ${e.find(".item").text()}`)})),orderPayment.clear();for(let e=0;e<t.payments.length;e++)orderPayment.addPayment(t.payments[e],!0)}(v.order),t.modal("show")}))}}}(),orderForm=function(){let t,e=$("#orderFormModal"),n=$("#orderFormModalTitle"),a=$("#orderForm"),i=a.find("#orderDate"),o=a.find("#poNo"),r=a.find("#supplier"),d=a.find("#addItem"),l=e.find("#itemsTable"),c=l.find("tbody"),s=l.find("#itemTotalAmount"),m=e.find("#discTypeDisplay"),u=e.find("#discTypePercentage"),p=e.find("#discTypeAmount"),f=e.find(".disc-type"),y=e.find("#discount"),v=e.find("#discountAmount"),_=e.find("#discountAmountDisplay"),h=e.find("#tax"),b=e.find("#taxAmount"),x=e.find("#totalAmount"),g=e.find("#saveOrder"),D=0;return{init:function(){i.datepicker({todayHighlight:!0}),r.select2({placeholder:"Select Supplier",dropdownParent:a}),h.select2({placeholder:"Select Tax",dropdownParent:a,allowClear:!0}),new AutoNumeric("#discount",{minimumValue:0,watchExternalChanges:!0}),d.click((function(){w({id:0,product_id:"",uom:"",unit_price:"",qty:"",total_amount:""})})),f.click((function(){f.removeClass("active"),$(this).addClass("active"),m.text(this.text),k(),y.focus()})),$("#discount, #tax").change((function(){k()})),g.click((function(){!function(){const e=c.children();if(0==e.length)return toastr.error("Unable to save order, no item found."),!1;{l.find(".bg-red-100").removeClass("bg-red-100");let t=!1;if(e.each((function(n){const a=$(this);for(let i=n+1;i<e.length;i++){const n=$(e[i]);if(a.find(".product").val()==n.find(".product").val()){a.addClass("bg-red-100"),n.addClass("bg-red-100"),t=!0;break}}if(t)return!1})),t)return toastr.error("Unable to save order, duplicate items found."),!1}if(a.parsley().validate()){let e={orderDate:cms.convertToDate(i.val()),poNo:o.val(),supplier:r.val(),discPercentage:"%"==m.text()?cms.convertToDecimal(y.val()):null,discAmount:v.val(),tax:h.val(),taxPercentage:null,taxAmount:null,totalAmount:cms.convertToDecimal(x.text()),products:c.children().map((function(t,e){const n=$(e);return{id:this.id.replace("tr",""),product:n.find(".product").val(),uom:n.find(".uom").text(),price:cms.convertToDecimal(n.find(".price").text().replace(_currencySymbol,"")),qty:cms.convertToDecimal(n.find(".qty").val()),total:cms.convertToDecimal(n.find(".total").text().replace(_currencySymbol,""))}})).get()};""!=e.tax&&(e.taxPercentage=t,e.taxAmount=cms.convertToDecimal(b.text().replace(_currencySymbol,""))),cms.saveForm(_id,e,_url,(function(){orderList.reload(),0==_id&&C()}))}}()})),e.on("hidden.bs.modal",(function(){C()}))},view:function(){0==_id?(n.text("Create New Order"),_currencySymbol=_currentBranchCurrencySymbol,e.modal("show")):(n.text("Edit Order Details"),cms.get(`${_url}/${_id}/edit`,null,(function(t){_currencySymbol=t.currencySymbol,function(t){i.datepicker("setDate",cms.formatDate(t.order_date)),o.val(t.po_no),r.val(t.supplier_id).trigger("change"),h.select2("val",cms.isNull(t.tax_id,"").toString());let e=0;for(let n=0;n<t.products.length;n++){const a=t.products[n];e+=cms.convertToDecimal(a.total_amount),w(a)}s.text(`${_currencySymbol}${cms.numberWithCommas(e.toFixed(2))}`),v.val(t.disc_amount),null!=t.disc_percentage?(u.trigger("click"),y.val(t.disc_percentage),_.text(_currencySymbol+cms.numberWithCommas(t.disc_amount))):(p.trigger("click"),y.val(t.disc_amount));null!=t.tax_percentage&&b.text(_currencySymbol+cms.numberWithCommas(t.tax_amount)).show();x.text(cms.numberWithCommas(t.total_amount))}(t.order),e.modal("show")})))}};function w(t){D++;const e=$(`\n        <tr id="tr${t.id}">\n        <td><button type="button" class="btn btn-primary btn-xs fs-9px delete"><i class="fa fa-trash"></i></button></td>\n        <td><select class="form-select form-select-sm product" required data-parsley-errors-container="#product-error${D}">\n        <option value="" disabled="true" ${""==t.product_id?"selected":""}>Select Item</option>\n        ${_products.filter((function(e){return e.is_active||!e.is_active&&e.id==t.product_id})).map((function(e){return`<option value="${e.id}" ${t.product_id==e.id?"selected":""} data-uom="${e.uom}" data-price="${e.cost_price}">${e.code} - ${e.name}</option>`})).join("")}\n        </select>\n        <div id="product-error${D}"></div>\n        </td>\n        <td class="uom">${t.uom}</td>\n        <td class="price">${_currencySymbol}${cms.numberWithCommas(t.unit_price)}</td>\n        <td>\n        <input id="qty${D}" type="text" class="qty form-control form-control-sm" value="${t.qty}" required/></td>\n        <td class="total">${_currencySymbol}${cms.numberWithCommas(t.total_amount)}</td>\n        </tr>\n        `).appendTo(c);e.find(".delete").click((function(){$(this).closest("tr").remove(),k(e)})),e.find(".product").select2({width:"100%",placeholder:"Select Item",dropdownParent:a}).change((function(){const t=$(this).find("option:selected");e.find(".uom").text(t.data("uom")),e.find(".price").text(_currencySymbol+cms.numberWithCommas(t.data("price"))),k(e)})),new AutoNumeric(`#qty${D}`,{minimumValue:0,watchExternalChanges:!0}),e.find(`#qty${D}`).change((function(){k(e)}))}function k(e){let n=0;if(null!=e){const t=cms.convertToDecimal(e.find(".price").text().replace(_currencySymbol,"")),a=cms.convertToDecimal(e.find(".qty").val());n=t*a,e.find(".total").text(_currencySymbol+cms.numberWithCommas(n.toFixed(2))),n=0,c.find(".total").each((function(){n+=cms.convertToDecimal(this.innerText.replace(_currencySymbol,""))})),s.text(`${_currencySymbol}${cms.numberWithCommas(n.toFixed(2))}`)}else n=cms.convertToDecimal(s.text().replace(_currencySymbol,""));if(null!=h.val()){t=h.find("option:selected").data("percentage");const e=n*(t/100);b.text(_currencySymbol+cms.numberWithCommas(e.toFixed(2))).show(),n+=e}else b.text("0").hide();let a=cms.convertToDecimal(y.val()),i=0;const o=m.text();"%"==o&&a>100&&(a=100,y.val(a)),i="%"==o?n*(a/100):a,i>n&&(i=n,"%"!=o&&y.val(i)),v.val(i),"%"==o?_.text(_currencySymbol+cms.numberWithCommas(i.toFixed(2))).show():_.hide(),n-=i,x.text(cms.numberWithCommas(n.toFixed(2)))}function C(){c.html(""),s.text(""),_.text(""),v.val(""),b.text("0.00"),x.text("0.00"),a[0].reset(),a.parsley().reset(),a.find("select").trigger("change")}}(),orderList=function(){let t,e=$("#addOrder"),n=$("#ordersTable");return{init:function(){_isCurrentBranchAll&&e.remove();t=n.DataTable({processing:!0,serverSide:!0,ajax:_url,columns:[{data:null,name:"actions",searchable:!1,orderable:!1},{data:"code",name:"code"},{data:"order_date",name:"order_date",render:function(t){return cms.formatDate(t)}},{data:"po_no",name:"po_no"},{data:"supplier",name:"supplier"},{data:"item_count",name:"item_count",render:function(t){return cms.numberWithCommas(t)}},{data:"total_amount",name:"total_amount"},{data:"invoice_no",name:"invoice_no"},{data:"is_fully_paid",name:"is_fully_paid"},{data:"is_delivery_completed",name:"is_delivery_completed",render:function(t){let e="On Process",n="warning";return 1==t&&(e="Completed",n="success"),`<span class="text-${n}">${e}</span>`}},{data:"branch",name:"branch"}],order:[[1,"asc"]],createdRow:function(t,e,n){let a=$(t);a.find("td:eq(0)").addClass("text-center").html(e.can_edit?`<div class="btn-group dropend">\n                        <a href="#" class="dropdown-toggle text-primary" data-bs-toggle="dropdown">\n                        <i class="fa fa-ellipsis-vertical"></i>\n                        </a>\n                        <ul class="dropdown-menu dropdown-menu-end">\n                            <li><button id="edit${e.id}" class="dropdown-item edit fs-11px" type="button">Edit</button></li>\n                            <li><button id="del${e.id}" class="dropdown-item delete fs-11px" type="button">Cancel Order</button></li>\n                        </ul>\n                    </div>`:""),a.find("td:eq(1)").html(`<a href="javascript:;" id="view${e.id}" class='view'>${e.code}</a>`),a.find("td:eq(6)").html(`${e.currency_symbol}${cms.numberWithCommas(e.total_amount)}`);let i="No Payment",o="danger";1==e.is_fully_paid?(i="Fully Paid",o="success"):e.paid_amount>0&&(i="Partial Payment",o="warning"),a.find("td:eq(8)").html(`<span class="text-${o}">${i}</span>`)},drawCallback:function(){n.find(".edit").unbind("click").click((function(){_id=this.id.replace("edit",""),orderForm.view()})),n.find(".delete").unbind("click").click((function(){cms.confirm("Cancel Order","Are you sure you want to cancel this order?",(()=>{cms.delete(`${_url}/${this.id.replace("del","")}`,null,(()=>{toastr.success("Order has been cancelled.","Cancel Order"),a()}))}))})),n.find(".view").unbind("click").click((function(){_id=this.id.replace("view",""),orderDetails.view()}))},initComplete:function(){$("#ordersTable_filter input").unbind(),$("#ordersTable_filter input").keyup((function(e){13==e.keyCode&&t.search(this.value).draw()}));const e=$("#ordersTable_filter"),n=moment().startOf("year"),a=moment().endOf("year"),i=$(`<div id="drFilter" class="btn btn-white d-inline-block w-auto ms-2">\n                <span class="flex-1">${n.format("MMMM D, YYYY")} - ${a.format("MMMM D, YYYY")}</span>\n                <i class="fa fa-caret-down"></i>\n                </div>`);e.append(i),i.daterangepicker({startDate:n,endDate:a,showDropdowns:!0,ranges:{Today:[moment(),moment()],Yesterday:[moment().subtract(1,"days"),moment().subtract(1,"days")],"Last 7 Days":[moment().subtract(6,"days"),moment()],"Last 30 Days":[moment().subtract(29,"days"),moment()],"This Month":[moment().startOf("month"),moment().endOf("month")],"Last Month":[moment().subtract(1,"month").startOf("month"),moment().subtract(1,"month").endOf("month")],"This Year":[n,a]}},(function(t,e,n){i.find("span").html(t.format("MMMM D, YYYY")+" - "+e.format("MMMM D, YYYY")),l()}));const o=$(`<select id="supplierFilter" class="additional-filter form-select form-select-sm d-inline-block w-auto ms-2">\n                <option value="">All Suppliers</option>\n                ${$("#orderForm").find("#supplier").children().not(":eq(0)").map((function(){return`<option value="${this.value}">${this.text}</option>`})).get().join("")}\n                </select>`);e.append(o);const r=$('<select id="paymentStatusFilter" class="additional-filter form-select form-select-sm d-inline-block w-auto ms-2">\n                <option value="">All Payment Statuses</option>\n                <option>No Payment</option>\n                <option>Partial Payment</option>\n                <option>Fully Paid</option>\n                </select>');e.append(r);const d=$('<select id="deliveryStatusFilter" class="additional-filter form-select form-select-sm d-inline-block w-auto ms-2">\n                <option value="">All Delivery Statuses</option>\n                <option value="0">On Process</option>\n                <option value="1">Completed</option>\n                </select>');function l(){const e=i.data("daterangepicker");t.ajax.url(`${_url}/?startDate=${e.startDate.format("YYYY-MM-DD")}&endDate=${e.endDate.format("YYYY-MM-DD")}&supplier=${o.val()}&paymentStatus=${r.val()}&deliveryStatus=${d.val()}`).load()}e.append(d),$(".additional-filter").change((function(){l()}))}}),e.click((function(){_id=0,orderForm.view()}))},reload:a};function a(){t.ajax.reload(null,!1)}}();$((function(){$(document).ready((function(){orderAttachments.init(),orderPayment.init(),orderDelivery.init(),orderForm.init(),orderList.init()}))}));
