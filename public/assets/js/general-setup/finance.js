var taxForm=function(){let e=$("#taxFormModal"),t=$("#taxFormModalTitle"),n=$("#taxForm"),a=n.find("#schemeNo"),i=n.find("#percentage"),d=e.find("#saveTax");return{init:function(){new AutoNumeric("#percentage",{minimumValue:0,maximumValue:100,watchExternalChanges:!0}),d.click((function(){!function(){if(n.parsley().validate()){let e={schemeNo:a.val(),percentage:cms.convertToDecimal(i.val())};cms.saveForm(_id,e,_taxUrl,(function(){taxList.reload(),0==_id&&o()}))}}()})),e.on("hidden.bs.modal",(function(){o()}))},view:function(){0==_id?(t.text("Create New Tax"),e.modal("show")):(t.text("Edit Tax Details"),cms.get(`${_taxUrl}/${_id}/edit`,null,(function(t){var n;n=t.tax,a.val(n.code),i.val(n.percentage),e.modal("show")})))}};function o(){n[0].reset(),n.parsley().reset()}}(),taxList=function(){let e,t=$("#addTax"),n=$("#taxesTable");return{init:function(){null==e&&(e=n.DataTable({processing:!0,serverSide:!0,ajax:_taxUrl,columns:[{data:null,name:"actions",searchable:!1,orderable:!1},{data:"code",name:"code"},{data:"percentage",name:"percentage",render:function(e){return cms.numberWithCommas(e)}}],order:[[1,"asc"]],createdRow:function(e,t,n){$(e).find("td:eq(0)").addClass("text-center").html(t.is_system_default?"":`<div class="btn-group dropend">\n                            <a href="#" class="dropdown-toggle text-primary" data-bs-toggle="dropdown">\n                            <i class="fa fa-ellipsis-vertical"></i>\n                            </a>\n                            <ul class="dropdown-menu dropdown-menu-end">\n                                <li><button id="edit${t.id}" class="dropdown-item edit fs-11px" type="button">Edit</button></li>\n                                <li><button id="del${t.id}" class="dropdown-item delete fs-11px" type="button">Delete</button></li>\n                            </ul>\n                        </div>`)},drawCallback:function(){n.find(".edit").unbind("click").click((function(){_id=this.id.replace("edit",""),taxForm.view()})),n.find(".delete").unbind("click").click((function(){cms.confirm("Delete Tax","Are you sure you want to delete this record?",(()=>{cms.delete(`${_taxUrl}/${this.id.replace("del","")}`,null,(()=>{toastr.success("Tax has been deleted.","Delete Tax"),a()}))}))}))},initComplete:function(){$("#taxesTable_filter input").unbind(),$("#taxesTable_filter input").keyup((function(t){13==t.keyCode&&e.search(this.value).draw()}))}})),t.click((function(){_id=0,taxForm.view()}))},reload:a};function a(){e.ajax.reload(null,!1)}}(),paymentModeForm=function(){let e=$("#paymentModeFormModal"),t=$("#paymentModeFormModalTitle"),n=$("#paymentModeForm"),a=n.find("#description"),i=n.find("#seqNo"),d=n.find("#salesReportExcluded"),o=e.find("#savePaymentMode");return{init:function(){new AutoNumeric("#seqNo",{minimumValue:0,decimalPlaces:0,watchExternalChanges:!0}),o.click((function(){!function(){if(n.parsley().validate()){let e={description:a.val(),seqNo:cms.convertToInt(i.val()),salesReportExcluded:d.is(":checked")?1:0};cms.saveForm(_id,e,_paymentModeUrl,(function(){paymentModeList.reload(),0==_id&&l()}))}}()})),e.on("hidden.bs.modal",(function(){l()}))},view:function(){0==_id?(t.text("Create New Payment Mode"),e.modal("show")):(t.text("Edit Payment Mode Details"),cms.get(`${_paymentModeUrl}/${_id}/edit`,null,(function(t){var n;n=t.paymentMode,a.val(n.description),i.val(n.seq_no),d.prop("checked",n.sales_report_excluded).trigger("change"),e.modal("show")})))}};function l(){n[0].reset(),n.parsley().reset()}}(),paymentModeList=function(){let e,t=$("#addPaymentMode"),n=$("#paymentModesTable");return{init:function(){_isCurrentBranchAll&&t.remove();null==e&&(e=n.DataTable({processing:!0,serverSide:!0,ajax:_paymentModeUrl,columns:[{data:null,name:"actions",searchable:!1,orderable:!1},{data:"description",name:"description"},{data:"seq_no",name:"seq_no",render:function(e){return cms.numberWithCommas(e)}},{data:"sales_report_excluded",name:"sales_report_excluded",render:function(e){return 1==e?"Yes":"No"}},{data:"branch",name:"branch"}],order:[[1,"asc"]],createdRow:function(e,t,n){$(e).find("td:eq(0)").addClass("text-center").html(`<div class="btn-group dropend">\n                            <a href="#" class="dropdown-toggle text-primary" data-bs-toggle="dropdown">\n                            <i class="fa fa-ellipsis-vertical"></i>\n                            </a>\n                            <ul class="dropdown-menu dropdown-menu-end">\n                                <li><button id="edit${t.id}" class="dropdown-item edit fs-11px" type="button">Edit</button></li>\n                                <li><button id="del${t.id}" class="dropdown-item delete fs-11px" type="button">Delete</button></li>\n                            </ul>\n                        </div>`)},drawCallback:function(){n.find(".edit").unbind("click").click((function(){_id=this.id.replace("edit",""),paymentModeForm.view()})),n.find(".delete").unbind("click").click((function(){cms.confirm("Delete Payment Mode","Are you sure you want to delete this record?",(()=>{cms.delete(`${_paymentModeUrl}/${this.id.replace("del","")}`,null,(()=>{toastr.success("Payment Mode has been deleted.","Delete Payment Mode"),a()}))}))}))},initComplete:function(){$("#paymentModesTable_filter input").unbind(),$("#paymentModesTable_filter input").keyup((function(t){13==t.keyCode&&e.search(this.value).draw()}))}})),t.click((function(){_id=0,paymentModeForm.view()}))},reload:a};function a(){e.ajax.reload(null,!1)}}();$((function(){$(document).ready((function(){$("#taxesLink").click((function(){taxList.init()})),taxForm.init(),paymentModeForm.init(),paymentModeList.init()}))}));
