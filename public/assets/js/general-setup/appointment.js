var categoryForm=function(){let e=$("#categoryFormModal"),t=$("#categoryFormModalTitle"),n=$("#categoryForm"),i=n.find("#description"),a=n.find("#seqNo"),o=n.find("#color"),s=e.find("#saveCategory");return{init:function(){new AutoNumeric("#seqNo",{minimumValue:0,decimalPlaces:0,watchExternalChanges:!0}),o.spectrum({showInput:!0,showAlpha:!1}),s.click((function(){!function(){if(n.parsley().validate()){let e={description:i.val(),seqNo:a.val(),color:o.val().replace(/#/g,"")};cms.saveForm(_id,e,_categoryUrl,(function(){categoryList.reload(),0==_id&&l()}))}}()})),e.on("hidden.bs.modal",(function(){l()}))},view:function(){0==_id?(t.text("Create New Category"),e.modal("show")):(t.text("Edit Category Details"),cms.get(`${_categoryUrl}/${_id}/edit`,null,(function(t){var n;n=t.category,i.val(n.description),a.val(n.seq_no),o.spectrum("set","#"+n.hex_color),e.modal("show")})))}};function l(){n[0].reset(),n.parsley().reset()}}(),categoryList=function(){let e,t=$("#addCategory"),n=$("#categoriesTable");return{init:function(){_isCurrentBranchAll&&t.remove();null==e&&(e=n.DataTable({processing:!0,serverSide:!0,ajax:_categoryUrl,columns:[{data:null,name:"actions",searchable:!1,orderable:!1},{data:"seq_no",name:"seq_no"},{data:"description",name:"description"},{data:"hex_color",name:"hex_color",render:function(e){return`<i class="fa fa-square" style="color:#${e};"></i> #${e}`}},{data:"branch",name:"branch"}],order:[[1,"asc"]],createdRow:function(e,t,n){$(e).find("td:eq(0)").addClass("text-center").html(t.is_system_default?"":`<div class="btn-group dropend">\n                            <a href="#" class="dropdown-toggle text-primary" data-bs-toggle="dropdown">\n                            <i class="fa fa-ellipsis-vertical"></i>\n                            </a>\n                            <ul class="dropdown-menu dropdown-menu-end">\n                                <li><button id="edit${t.id}" class="dropdown-item edit fs-11px" type="button">Edit</button></li>\n                                <li><button id="del${t.id}" class="dropdown-item delete fs-11px" type="button">Delete</button></li>\n                            </ul>\n                        </div>`)},drawCallback:function(){n.find(".edit").unbind("click").click((function(){_id=this.id.replace("edit",""),categoryForm.view()})),n.find(".delete").unbind("click").click((function(){cms.confirm("Delete Category","Are you sure you want to delete this record?",(()=>{cms.delete(`${_categoryUrl}/${this.id.replace("del","")}`,null,(()=>{toastr.success("Category has been deleted.","Delete Category"),i()}))}))}))},initComplete:function(){$("#categoriesTable_filter input").unbind(),$("#categoriesTable_filter input").keyup((function(t){13==t.keyCode&&e.search(this.value).draw()}))}})),t.click((function(){_id=0,categoryForm.view()}))},reload:i};function i(){e.ajax.reload(null,!1)}}(),statusForm=function(){let e=$("#statusFormModal"),t=$("#statusFormModalTitle"),n=$("#statusForm"),i=n.find("#description"),a=n.find("#seqNo"),o=n.find("#color"),s=e.find("#saveStatus");return{init:function(){new AutoNumeric("#seqNo",{minimumValue:0,decimalPlaces:0,watchExternalChanges:!0}),o.spectrum({showInput:!0,showAlpha:!1}),s.click((function(){!function(){if(n.parsley().validate()){let e={description:i.val(),seqNo:a.val(),color:o.val().replace(/#/g,"")};cms.saveForm(_id,e,_statusUrl,(function(){statusList.reload(),0==_id&&l()}))}}()})),e.on("hidden.bs.modal",(function(){l()}))},view:function(){0==_id?(t.text("Create New Status"),e.modal("show")):(t.text("Edit Status Details"),cms.get(`${_statusUrl}/${_id}/edit`,null,(function(t){var n;n=t.status,i.val(n.description),a.val(n.seq_no),o.spectrum("set","#"+n.hex_color),e.modal("show")})))}};function l(){n[0].reset(),n.parsley().reset()}}(),statusList=function(){let e,t=$("#addStatus"),n=$("#statusesTable");return{init:function(){null==e&&(e=n.DataTable({processing:!0,serverSide:!0,ajax:_statusUrl,columns:[{data:null,name:"actions",searchable:!1,orderable:!1},{data:"seq_no",name:"seq_no"},{data:"description",name:"description"},{data:"hex_color",name:"hex_color",render:function(e){return`<i class="fa fa-square" style="color:#${e};"></i> #${e}`}}],order:[[1,"asc"]],createdRow:function(e,t,n){$(e).find("td:eq(0)").addClass("text-center").html(t.is_system_default?"":`<div class="btn-group dropend">\n                            <a href="#" class="dropdown-toggle text-primary" data-bs-toggle="dropdown">\n                            <i class="fa fa-ellipsis-vertical"></i>\n                            </a>\n                            <ul class="dropdown-menu dropdown-menu-end">\n                                <li><button id="edit${t.id}" class="dropdown-item edit fs-11px" type="button">Edit</button></li>\n                                <li><button id="del${t.id}" class="dropdown-item delete fs-11px" type="button">Delete</button></li>\n                            </ul>\n                        </div>`)},drawCallback:function(){n.find(".edit").unbind("click").click((function(){_id=this.id.replace("edit",""),statusForm.view()})),n.find(".delete").unbind("click").click((function(){cms.confirm("Delete Status","Are you sure you want to delete this record?",(()=>{cms.delete(`${_statusUrl}/${this.id.replace("del","")}`,null,(()=>{toastr.success("Status has been deleted.","Delete Status"),i()}))}))}))},initComplete:function(){$("#statusesTable_filter input").unbind(),$("#statusesTable_filter input").keyup((function(t){13==t.keyCode&&e.search(this.value).draw()}))}})),t.click((function(){_id=0,statusForm.view()}))},reload:i};function i(){e.ajax.reload(null,!1)}}();$((function(){$(document).ready((function(){$("#statusesLink").click((function(){statusList.init()})),statusForm.init(),categoryList.init(),categoryForm.init()}))}));
